/* style.css */
/* ---- Base ---- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%;background:#cfe3f6;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans TC,Arial,sans-serif;overflow:hidden}
#app{width:100%;height:100%;display:flex;flex-direction:column;gap:14px;padding:18px}

/* ---- Top bar ---- */
#topbar{
  background:linear-gradient(180deg,#0f2f55 0%, #0b2442 100%);
  color:#e9f3ff;border-radius:18px;padding:12px 14px;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
  display:flex;align-items:center;justify-content:space-between;gap:12px
}
.brand .title{font-size:20px;font-weight:900;letter-spacing:.5px}

/* 兩排 HUD */
.stats{display:flex;flex-direction:column;gap:10px;align-items:flex-end;justify-content:center}
.statsRow{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:flex-end}

.pill{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.18);
  padding:8px 12px;border-radius:999px;
  font-weight:800;font-size:13px;display:flex;gap:8px;align-items:center
}
.btn{cursor:pointer;user-select:none}
.btn:active{transform:translateY(1px)}
.kbd{
  font-size:11px;padding:2px 6px;border-radius:999px;
  background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.15)
}
.danger{background:linear-gradient(180deg,#ff5470,#ff2f57);border-color:rgba(255,255,255,.25)}

/* ---- Stage ---- */
#stageWrap{
  position:relative;flex:1;min-height:0;
  background:linear-gradient(180deg,#17385f 0%, #0e2b4d 100%);
  border-radius:18px;padding:12px;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
}
#game{
  width:100%;height:100%;
  display:block;border-radius:14px;
  background:radial-gradient(circle at 30% 20%, rgba(255,255,255,.08), rgba(0,0,0,.14) 55%, rgba(0,0,0,.35) 100%);
  border:1px solid rgba(255,255,255,.12);
}

/* ---- Overlays ---- */
.overlay{
  position:absolute;inset:12px;
  border-radius:14px;
  display:none;align-items:center;justify-content:center;
  flex-direction:column;gap:14px;
  background:rgba(0,0,0,.55);
  z-index:20;text-align:center;
}
.big{
  font-weight:1000;
  font-size:min(18vw,160px);
  letter-spacing:2px;
  text-shadow:0 0 14px rgba(255,255,255,.22), 0 0 40px rgba(255,255,255,.18);
  padding:8px 18px;border-radius:16px;
}
.hint{color:#fff;opacity:.92;font-weight:800;font-size:min(4vw,22px);letter-spacing:1px}

/* 通關彩虹光 + 閃爍 + 震動 */
.rainbow{
  color:#fff;
  filter:hue-rotate(0deg);
  animation:rainbowHue 1.2s linear infinite, glowPulse .85s ease-in-out infinite;
  text-shadow:
    0 0 18px rgba(255,255,255,.35),
    0 0 40px rgba(255,170,0,.35),
    0 0 90px rgba(0,200,255,.25);
}
.gameover{
  color:#ffebee;
  text-shadow:
    0 0 20px rgba(255,60,60,.35),
    0 0 55px rgba(255,0,70,.25);
}
.shake{animation:shake .18s linear infinite}
.flicker{animation:flicker 1.1s ease-in-out infinite}
@keyframes rainbowHue{to{filter:hue-rotate(360deg)}}
@keyframes glowPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.04)}}
@keyframes shake{0%{transform:translate(0,0)}25%{transform:translate(2px,-1px)}50%{transform:translate(-2px,1px)}75%{transform:translate(1px,2px)}100%{transform:translate(0,0)}}
@keyframes flicker{0%,100%{opacity:1}45%{opacity:.72}55%{opacity:1}60%{opacity:.82}75%{opacity:1}}

/* ---- Mobile HUD ---- */
#mobileHUD{
  display:none;
  gap:10px;justify-content:space-between;align-items:center;
  background:rgba(9,33,60,.75);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;padding:10px;
  box-shadow:0 10px 22px rgba(0,0,0,.18);
}
.mBtn{
  flex:1;
  background:linear-gradient(180deg,#1c4a7f,#123a66);
  border:1px solid rgba(255,255,255,.15);
  color:#fff;border-radius:12px;
  padding:10px 8px;
  font-weight:900;
  cursor:pointer;
}
.mBtn:active{transform:translateY(1px)}
@media (pointer:coarse){
  #mobileHUD{display:flex}
}

/* ---- Inline input in pill (Powerup rate) ---- */
.pill input{
  width:56px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.18);
  color:#e9f3ff;
  border-radius:10px;
  padding:4px 6px;
  font-weight:900;
  outline:none;
  text-align:center;
}
.pill input::-webkit-outer-spin-button,
.pill input::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
.pill input[type=number]{ -moz-appearance: textfield; }

/* ---- Mobile compact spacing (不改風格，只縮高度) ---- */
@media (max-width: 520px){
  #app{padding:12px;gap:12px}
  #topbar{padding:10px 12px;border-radius:18px}
  .brand .title{font-size:18px}
  .stats{gap:8px}
  .statsRow{gap:8px}
  .pill{padding:7px 10px;font-size:12px}
  #stageWrap{padding:10px}
  #mobileHUD{padding:9px}
  .mBtn{padding:9px 6px}
}
